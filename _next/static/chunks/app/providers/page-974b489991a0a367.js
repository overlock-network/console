(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{18159:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>l,aR:()=>i});var a=t(73365),n=t(1521),s=t(14130);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},87478:(e,r,t)=>{Promise.resolve().then(t.bind(t,95184)),Promise.resolve().then(t.bind(t,76350)),Promise.resolve().then(t.bind(t,32729))},95184:(e,r,t)=>{"use strict";t.d(r,{default:()=>C});var a=t(73365),n=t(1521),s=t(1168),l=t(46465),i=t(10914);let c=JSON.parse('{"address":"Bf1FmngPYT5tmEMZ9AgtFKHpV1izwsPGp8GMaX8od6kT","metadata":{"name":"provider","version":"0.1.0","spec":"0.1.0","description":"Overlock Provider"},"instructions":[{"name":"register_provider","discriminator":[254,209,54,184,46,197,109,78],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"provider","writable":true,"signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"name","type":"string"},{"name":"ip","type":"string"},{"name":"port","type":"u16"},{"name":"country","type":"string"},{"name":"environment_type","type":"string"},{"name":"availability","type":"bool"}]}],"accounts":[{"name":"Provider","discriminator":[164,180,71,17,75,216,80,195]}],"errors":[{"code":6000,"name":"CustomError","msg":"Custom error message"}],"types":[{"name":"Provider","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"ip","type":"string"},{"name":"port","type":"u16"},{"name":"country","type":"string"},{"name":"environment_type","type":"string"},{"name":"availability","type":"bool"}]}}]}');var o=t(70949),d=t(45901),u=t(14130),m=t(7502),p=t(58005),x=t(23060),h=t(35788),j=t(95884);let v=e=>{let{providers:r,hoveredCountry:t,setHoveredCountry:s,onSelect:l}=e,[i,c]=(0,n.useState)([0,0]),[o,v]=(0,n.useState)(1.2);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>v(e=>Math.min(1.5*e,10)),disabled:o>=10,children:(0,a.jsx)(x.A,{})}),(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>v(e=>Math.max(e/1.5,1.2)),disabled:o<=1.2,children:(0,a.jsx)(h.A,{})}),(0,a.jsx)(p.$,{variant:"ghost",size:"icon",onClick:()=>{c([0,0]),v(1.2)},disabled:1.2===o&&0===i[0]&&0===i[1],children:(0,a.jsx)(j.A,{})})]}),(0,a.jsx)(d.ComposableMap,{width:1e3,height:600,children:(0,a.jsxs)(d.ZoomableGroup,{center:i,zoom:o,onMoveEnd:e=>{let{coordinates:r,zoom:t}=e;c(r),v(t)},children:[(0,a.jsx)(d.Geographies,{geography:"/geography.json",children:e=>{let{geographies:t}=e;return t.map(e=>(0,a.jsx)(d.Geography,{geography:e,style:{default:{fill:"#212121",stroke:"#09090b",strokeWidth:.5,outline:"none"},hover:{fill:"#212121",stroke:"#09090b",strokeWidth:.5,outline:"none"},pressed:{fill:"#212121",stroke:"#09090b",strokeWidth:.5,outline:"none"}},onMouseEnter:()=>s(e.properties.name),onClick:()=>{let t=r.find(r=>r.account.country===e.properties.name);t&&l(t.account)}},e.rsmKey))}}),r.map(e=>{let r=u.c[e.account.country];if(!r)return null;let n=t===e.account.country;return(0,a.jsxs)(m.m_,{open:n,children:[(0,a.jsx)(m.k$,{asChild:!0,children:(0,a.jsx)(d.Marker,{coordinates:r,onMouseEnter:()=>s(e.account.country),onMouseLeave:()=>s(null),onClick:()=>l(e.account),children:(0,a.jsx)("circle",{className:"marker \n                      ".concat(e.account.availability?"available":"unavailable"," \n                      ").concat(n?"hovered":"","\n                    "),r:6/o,style:{strokeWidth:"".concat(2/o)}})})}),(0,a.jsx)(m.ZI,{side:"right",align:"center",className:e.account.availability?"bg-primary":"bg-foreground text-background",children:Object.entries(e.account).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("b",{children:[r,": "]}),String(t),(0,a.jsx)("br",{})]},r)})})]},e.account.ip)})]})})]})};var y=t(18159),f=t(51951);let g=e=>{let{provider:r,onBack:t}=e,n=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());return(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-3xl gap-6",children:[(0,a.jsx)(y.Zp,{className:"bg-sidebar",children:(0,a.jsxs)(y.Wu,{className:"flex items-center justify-between gap-2 pt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold tracking-tight",children:r.name}),(0,a.jsx)(p.$,{onClick:t,children:"Back"})]})}),(0,a.jsxs)(y.Zp,{className:"bg-sidebar",children:[(0,a.jsx)(y.aR,{children:"Details"}),(0,a.jsx)(y.Wu,{children:(0,a.jsx)(f.XI,{children:(0,a.jsx)(f.BF,{children:Object.entries(r).map(e=>{let[r,t]=e;return(0,a.jsxs)(f.Hj,{children:[(0,a.jsx)(f.nA,{className:"font-medium pl-0",children:n(r)}),(0,a.jsx)(f.nA,{className:"text-right pr-0",children:String(t)})]},r)})})})})]})]})})};var b=t(54538),N=t(42258);let w=()=>[{accessorKey:"publicKey",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Id"})},cell:e=>{let{row:r}=e;return(0,a.jsx)("div",{className:"w-[120px] truncate",children:r.original.publicKey.toBase58()})}},{accessorKey:"name",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Name"})},cell:e=>{let{row:r}=e;return(0,a.jsx)("div",{className:"truncate",children:r.original.account.name})}},{accessorKey:"ip",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"IP"})},cell:e=>{let{row:r}=e;return(0,a.jsx)("div",{className:"truncate",children:r.original.account.ip})}},{accessorKey:"port",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Port"})},cell:e=>{let{row:r}=e;return r.original.account.port}},{accessorKey:"country",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Country"})},cell:e=>{let{row:r}=e;return r.original.account.country}},{accessorKey:"environmentType",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Environment"})},cell:e=>{let{row:r}=e;return r.original.account.environmentType}},{accessorKey:"availability",header:e=>{let{column:r}=e;return(0,a.jsx)(N.w,{column:r,title:"Available"})},cell:e=>{let{row:r}=e;return r.original.account.availability?"Yes":"No"}}],k=e=>{let{providers:r,onSelect:t}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-start justify-between gap-2 w-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Providers"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Here's a list of available providers!"}),(0,a.jsx)(b.b,{columns:w(),data:r,isLoading:!1,onRowClick:e=>t(e.account)})]})};function C(){let[e,r]=(0,n.useState)([]),[t,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)(null),{toast:h}=(0,l.dj)(),{connection:j,currentSolanaNetwork:y}=(0,i.k)(),f=(0,n.useMemo)(()=>new o.BP(c,{connection:j}),[j]);return((0,n.useEffect)(()=>{f&&(m(!0),f.account.provider.all().then(r).catch(()=>h({title:"Error",description:"Failed to fetch providers.",variant:"destructive"})).finally(()=>m(!1)))},[f]),u)?(0,a.jsx)(s.y,{}):(0,a.jsx)("div",{className:"max-w-[1400px] w-full",children:t?(0,a.jsx)(g,{provider:t,onBack:()=>d(null)}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold mb-1",children:"Network Capacity"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-primary text-xl",children:e.filter(e=>e.account.availability).length})," ","active providers in ",y.name]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"max-w-[800px] w-full",children:(0,a.jsx)(v,{providers:e,hoveredCountry:p,setHoveredCountry:x,onSelect:d})}),(0,a.jsx)(k,{providers:e,onSelect:d})]})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[24,792,484,482,310,655,716,683,455,347,870,358],()=>r(87478)),_N_E=e.O()}]);