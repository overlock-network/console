(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{22003:(e,t,a)=>{"use strict";a.d(t,{O:()=>d});var s=a(73365),n=a(47629),o=a(58005),r=a(43155),c=a(1521),i=a(61122),l=a(14130);function d(){let{token:e,setToken:t}=(0,i.N)(l.O3),[a,d]=(0,c.useState)(e),[u,p]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{e?p(!1):p(!0),d(e)},[e]),(0,s.jsx)(n.lG,{open:u,children:(0,s.jsxs)(n.Cf,{className:"[&>button]:hidden",children:[(0,s.jsx)(n.c7,{children:(0,s.jsx)(n.L3,{children:"Set Kubernetes Token"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste your Kubernetes Bearer token to access cluster resources."}),(0,s.jsx)(r.p,{type:"text",placeholder:"Enter Bearer token...",value:a,onChange:e=>d(e.target.value)}),(0,s.jsx)(n.Es,{children:(0,s.jsx)(o.$,{onClick:()=>{""!==a.trim()&&(t(a),p(!1))},children:"Save"})})]})})}},46583:(e,t,a)=>{"use strict";async function s(e,t){let a=await fetch("https://".concat(e.ip,":").concat(e.port,"/apis/apiextensions.crossplane.io/v1/compositeresourcedefinitions"),{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!a.ok)throw Error("Failed to fetch XRDs");return(await a.json()).items}async function n(e,t){let a=[];for(let o of(await s(e,t))){var n;let s=o.spec.names.kind,r=o.spec.names.plural,c=o.spec.group,i=null==(n=o.spec.versions[0])?void 0:n.name;if(!i)continue;let l=await fetch("https://".concat(e.ip,":").concat(e.port,"/apis/").concat(c,"/").concat(i,"/").concat(r),{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!l.ok)continue;let d=(await l.json()).items.map(e=>{var t;return null==(t=e.metadata)?void 0:t.name}).filter(e=>!!e).map(e=>({kind:s,group:c,version:i,plural:r,resource:e}));a.push(...d)}return a}async function o(e,t,a,s){var n,o,r;let c=a.spec.group,i=a.spec.versions[0].name,l=a.spec.names.kind,d=a.spec.names.plural,u=null!=(r=null==s||null==(n=s.metadata)?void 0:n.name)?r:null==s||null==(o=s.spec)?void 0:o.name;if(!u)throw Error("Resource name is required");let p={...(null==s?void 0:s.metadata)||{},name:u},m={apiVersion:"".concat(c,"/").concat(i),kind:l,metadata:p,...s},f=await fetch("https://".concat(e.ip,":").concat(e.port,"/apis/").concat(c,"/").concat(i,"/").concat(d),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(m)});if(!f.ok)throw Error(await f.text())}async function r(e,t,a){let s="https://".concat(e.ip,":").concat(e.port,"/api/v1/secrets?labelSelector=").concat(a),n=await fetch(s,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!n.ok)throw Error("Failed to fetch keys: ".concat(n.status," ").concat(n.statusText));return(await n.json()).items}async function c(e,t,a,s,n,o){let r="https://".concat(e.ip,":").concat(e.port,"/api/v1/namespaces/").concat(a,"/secrets"),c={apiVersion:"v1",kind:"Secret",metadata:{name:s,namespace:a,labels:{...o}},type:"Opaque",data:Object.entries(n).reduce((e,t)=>{let[a,s]=t;return e[a]=btoa(s),e},{})},i=await fetch(r,{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)});if(!i.ok){let e=await i.text();throw Error("Failed to create key: ".concat(i.status," ").concat(i.statusText,", ").concat(e))}}async function i(e,t,a,s){let n="https://".concat(e.ip,":").concat(e.port,"/api/v1/namespaces/").concat(a,"/secrets/").concat(s),o=await fetch(n,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!o.ok){let e=await o.text();throw Error("Failed to delete key: ".concat(o.status," ").concat(o.statusText,", ").concat(e))}}async function l(e,t,a,s){let n="https://".concat(e.ip,":").concat(e.port,"/api/v1/namespaces/").concat(a.namespace,"/secrets/").concat(a.name),o=await fetch(n,{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(!o.ok){let e=await o.text();throw Error("Failed to fetch key: ".concat(o.status," ").concat(o.statusText,", ").concat(e))}let r=await o.json(),c=Object.entries(s).reduce((e,t)=>{let[a,s]=t;return e[a]=btoa(s),e},{}),i={...r,data:c},l=await fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok){let e=await l.text();throw Error("Failed to update key: ".concat(l.status," ").concat(l.statusText,", ").concat(e))}}a.d(t,{Hy:()=>l,TH:()=>r,U2:()=>n,Zg:()=>o,cF:()=>c,wu:()=>s,yE:()=>i})},47629:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>m,L3:()=>f,c7:()=>p,lG:()=>i});var s=a(73365),n=a(1521),o=a(89752),r=a(72196),c=a(14130);let i=o.bL;o.l9;let l=o.ZL;o.bm;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(o.hJ,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});d.displayName=o.hJ.displayName;let u=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(l,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(o.UC,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[n,(0,s.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(r.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=o.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let f=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(o.hE,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});f.displayName=o.hE.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(o.VY,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",a),...n})}).displayName=o.VY.displayName},61122:(e,t,a)=>{"use strict";a.d(t,{N:()=>n});var s=a(1521);function n(e){let[t,a]=(0,s.useState)("");return(0,s.useEffect)(()=>{let t=sessionStorage.getItem(e);t&&a(t)},[e]),{token:t,setToken:t=>{sessionStorage.setItem(e,t),a(t)}}}},82928:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(73365),n=a(1521),o=a(42258);let r=()=>[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,s.jsx)(o.w,{column:t,title:"Name"})},cell:e=>{let{row:t}=e;return t.original.resource}},{accessorKey:"kind",header:e=>{let{column:t}=e;return(0,s.jsx)(o.w,{column:t,title:"Kind"})},cell:e=>{let{row:t}=e;return t.original.kind}},{accessorKey:"Group",header:e=>{let{column:t}=e;return(0,s.jsx)(o.w,{column:t,title:"Group"})},cell:e=>{let{row:t}=e;return t.original.group}},{accessorKey:"Version",header:e=>{let{column:t}=e;return(0,s.jsx)(o.w,{column:t,title:"Version"})},cell:e=>{let{row:t}=e;return t.original.version}},{accessorKey:"Plural",header:e=>{let{column:t}=e;return(0,s.jsx)(o.w,{column:t,title:"Plural"})},cell:e=>{let{row:t}=e;return t.original.plural}}];var c=a(65521),i=a(62310),l=a(46465),d=a(93263),u=a(22003),p=a(61122),m=a(46583),f=a(14130),h=a(35049);function x(){let{connected:e}=(0,i.vT)(),{toast:t}=(0,l.dj)(),{environments:a}=(0,i.sw)(),{token:o}=(0,p.N)(f.O3),[x,j]=(0,n.useState)(),[g,y]=(0,n.useState)([]),[v,w]=(0,n.useState)(!1),b=a.find(e=>e.id===x),{provider:N}=(0,i.u9)(null==b?void 0:b.providerId);return((0,n.useEffect)(()=>{N&&o&&b&&(w(!0),(0,m.U2)(N,o).then(e=>{y(e)}).catch(()=>t({title:"Error",description:"Failed to fetch resources.",variant:"destructive"})).finally(()=>w(!1)))},[N,o,b,t]),e)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"max-w-[1400px] w-full",children:[(0,s.jsxs)("div",{className:"flex items-end justify-between gap-2 mb-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Resources"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Here's a list of available resources!"})]}),(0,s.jsxs)(h.l6,{value:null!=x?x:"",onValueChange:j,children:[(0,s.jsx)(h.bq,{className:"w-[200px]",children:(0,s.jsx)(h.yv,{placeholder:"Select environment"})}),(0,s.jsx)(h.gC,{children:a.length>0?a.map(e=>{var t;return(0,s.jsx)(h.eb,{value:e.id,children:null!=(t=e.name)?t:e.id},e.id)}):(0,s.jsx)("span",{className:"text-xs pl-2",children:"environments not found"})})]})]}),(0,s.jsx)(c.b,{columns:r(),data:g,isLoading:v})]}),(0,s.jsx)(u.O,{})]}):(0,s.jsx)(d.U,{entitiesName:"resources"})}},86523:(e,t,a)=>{Promise.resolve().then(a.bind(a,82928)),Promise.resolve().then(a.bind(a,44953)),Promise.resolve().then(a.bind(a,55110))}},e=>{var t=t=>e(e.s=t);e.O(0,[83,373,965,355,964,82,58,956,689,696,598,35,301,414,77,62,347,870,358],()=>t(86523)),_N_E=e.O()}]);